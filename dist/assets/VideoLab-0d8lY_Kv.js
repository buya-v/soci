import{k as z,v as ue,h as a,q as e,w as k,G as p,F as he,D as Y,B as u,L as B,V as S,am as ge,M as be,J as ye,an as fe}from"./index-BhtDYtLX.js";import{d as je,e as ve}from"./ai-client-BJ6a5FrJ.js";import{C as Ne}from"./chevron-down-DO2d1w-d.js";import{C}from"./check-B9KMwBVL.js";import{C as P}from"./copy-wao3SMMI.js";import{P as we}from"./play-VFGELtNT.js";import{S as ke}from"./square-CeV-opnU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=z("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Z=[{id:"educational",label:"Educational",description:"Informative & teaching"},{id:"promotional",label:"Promotional",description:"Product or brand focused"},{id:"storytelling",label:"Storytelling",description:"Narrative & engaging"},{id:"tutorial",label:"Tutorial",description:"Step-by-step guide"}],Q=[{id:"tiktok",label:"TikTok",maxDuration:"60s"},{id:"instagram",label:"Reels",maxDuration:"90s"},{id:"youtube",label:"YouTube Shorts",maxDuration:"60s"},{id:"linkedin",label:"LinkedIn",maxDuration:"2min"}],A=["Starting video generation...","AI is creating your video...","Synthesizing frames...","Rendering motion...","Adding cinematic effects...","Almost there..."],ze=[{id:"16:9",label:"Landscape",icon:e.jsx(fe,{size:16})},{id:"9:16",label:"Portrait",icon:e.jsx(Pe,{size:16})},{id:"1:1",label:"Square",icon:e.jsx(ke,{size:16})}],Ve=["720p","1080p"];function Fe(){const{apiKeys:o,addNotification:d}=ue(),[h,F]=a.useState(""),[V,X]=a.useState("16:9"),[_,ee]=a.useState("1080p"),[E,se]=a.useState(null),[m,M]=a.useState(!1),[L,G]=a.useState(0),[$,U]=a.useState(null),[T,I]=a.useState(!1),g=a.useRef(null),q=a.useRef(null),[R,te]=a.useState(!0),[b,ae]=a.useState(""),[y,ie]=a.useState("educational"),[f,re]=a.useState("tiktok"),[H,J]=a.useState(!1),[i,oe]=a.useState(null),[j,K]=a.useState(null),[O,v]=a.useState(""),ne=ve();a.useEffect(()=>{if(!m||O)return;const s=setInterval(()=>{G(t=>(t+1)%A.length)},5e3);return()=>clearInterval(s)},[m,O]);const le=s=>{var n;const t=(n=s.target.files)==null?void 0:n[0];if(t){const l=new FileReader;l.onloadend=()=>{se(l.result)},l.readAsDataURL(t)}},ce=async()=>{var s,t;if(h.trim()){if(!o.gemini){d({type:"warning",title:"API Key Required",message:"Configure Gemini API key in Automation Hub to generate videos with Veo"});return}M(!0),G(0),U(null),v("Starting video generation...");try{const n=await fetch("/api/video/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:h.slice(0,1024),aspectRatio:V==="9:16"?"9:16":"16:9",apiKey:o.gemini})}),l=await n.json();if(!n.ok)throw new Error(l.error||"Failed to start video generation");const w=(s=l.operation)==null?void 0:s.name;if(!w)throw new Error("No operation name returned");v("Video generation in progress...");const r=60;let c=0;for(;c<r;){await new Promise(D=>setTimeout(D,1e4));const W=await fetch("/api/video/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:w,apiKey:o.gemini})}),x=await W.json();if(!W.ok)throw new Error(x.error||"Failed to check status");if(x.done){if(x.success&&((t=x.video)!=null&&t.uri))U(x.video.uri),v(""),d({type:"success",title:"Video Generated",message:"Your AI video is ready!"});else throw new Error(x.error||"Video generation failed");break}c++,G(D=>(D+1)%A.length)}if(c>=r)throw new Error("Video generation timed out. Please try again.")}catch(n){const l=n instanceof Error?n.message:"Failed to generate video";v(""),d({type:"error",title:"Video Generation Failed",message:l})}finally{M(!1)}}},de=()=>{g.current&&(T?g.current.pause():g.current.play(),I(!T))},me=async()=>{if(b.trim()){J(!0);try{const s=Q.find(c=>c.id===f),t=Z.find(c=>c.id===y),n=`You are an expert video scriptwriter specializing in short-form social media content. Create engaging, platform-optimized scripts that capture attention immediately.

Output format: Respond with valid JSON only, no markdown, no code blocks.`,l=`Create a ${y} video script for ${f} about: "${b}"

Requirements:
- Platform: ${s==null?void 0:s.label} (max ${s==null?void 0:s.maxDuration})
- Style: ${t==null?void 0:t.description}
- Must start with a strong hook (first 3 seconds are crucial)
- Include visual suggestions for each section
- End with a clear call-to-action

Respond with this exact JSON structure:
{
  "hook": "The attention-grabbing opening line (spoken in first 3 seconds)",
  "body": ["Point 1 with key message", "Point 2 with supporting info", "Point 3 with value/insight"],
  "callToAction": "What viewers should do next",
  "visualSuggestions": ["Visual for hook", "Visual for body section", "Visual for CTA"],
  "duration": "Estimated video duration"
}

Make the script conversational, authentic, and optimized for ${f}'s audience.`,w=await je(n,l,1024),r=JSON.parse(w);oe({hook:r.hook||"",body:Array.isArray(r.body)?r.body:[],callToAction:r.callToAction||"",visualSuggestions:Array.isArray(r.visualSuggestions)?r.visualSuggestions:[],duration:r.duration||"30-60s"}),F(`${r.hook} - ${r.body.join(". ")} Visual style: cinematic, engaging, ${y}`),d({type:"success",title:"Script Generated",message:"Your video script is ready. Review and customize as needed."})}catch(s){d({type:"error",title:"Script Generation Failed",message:s instanceof Error?s.message:"Could not generate script"})}finally{J(!1)}}},N=async(s,t)=>{try{await navigator.clipboard.writeText(s),K(t),setTimeout(()=>K(null),2e3)}catch{d({type:"error",title:"Copy Failed",message:"Could not copy to clipboard"})}},xe=()=>i?`HOOK:
${i.hook}

BODY:
${i.body.map((s,t)=>`${t+1}. ${s}`).join(`
`)}

CALL TO ACTION:
${i.callToAction}

VISUAL SUGGESTIONS:
${i.visualSuggestions.map((s,t)=>`${t+1}. ${s}`).join(`
`)}`:"",pe=()=>{switch(V){case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]";case"1:1":return"aspect-square"}};return e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Video Lab"}),e.jsx("p",{className:"text-gray-400",children:"Create AI-powered video content from text prompts"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium bg-success/10 text-success",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-success"}),`Script AI (${ne==="gemini"?"Gemini":"Claude"})`]})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("button",{onClick:()=>te(!R),className:"w-full flex items-center justify-between text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent-purple/20",children:e.jsx(he,{size:20,className:"text-accent-purple"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"AI Script Writer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Generate platform-optimized video scripts"})]})]}),R?e.jsx(Se,{size:20,className:"text-gray-400"}):e.jsx(Ne,{size:20,className:"text-gray-400"})]}),e.jsx(Y,{children:R&&e.jsx(k.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video Topic"}),e.jsx("input",{type:"text",value:b,onChange:s=>ae(s.target.value),placeholder:"e.g., 5 productivity tips for remote workers",className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Q.map(s=>e.jsxs("button",{onClick:()=>re(s.id),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${f===s.id?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:[e.jsx("span",{className:"block",children:s.label}),e.jsx("span",{className:"text-[10px] opacity-60",children:s.maxDuration})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Style"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(s=>e.jsx("button",{onClick:()=>ie(s.id),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${y===s.id?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:s.label},s.id))})]})]}),e.jsx(u,{variant:"primary",onClick:me,disabled:!b.trim()||H||!1,className:"w-full",children:H?e.jsxs(e.Fragment,{children:[e.jsx(B,{size:16,className:"animate-spin mr-2"}),"Writing Script..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{size:16,className:"mr-2"}),"Generate Script"]})}),e.jsx(Y,{children:i&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4 pt-4 border-t border-glass-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Estimated Duration"}),e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full font-medium",children:i.duration})]}),e.jsxs("div",{className:"p-4 bg-accent-pink/5 rounded-xl border border-accent-pink/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-accent-pink uppercase",children:"Hook (0-3s)"}),e.jsx("button",{onClick:()=>N(i.hook,"hook"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:j==="hook"?e.jsx(C,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-white",children:i.hook})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-glass-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Main Content"}),e.jsx("button",{onClick:()=>N(i.body.join(`
`),"body"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:j==="body"?e.jsx(C,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("ul",{className:"space-y-2",children:i.body.map((s,t)=>e.jsxs("li",{className:"flex gap-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"text-primary font-medium",children:[t+1,"."]}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{className:"p-4 bg-success/5 rounded-xl border border-success/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-success uppercase",children:"Call to Action"}),e.jsx("button",{onClick:()=>N(i.callToAction,"cta"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:j==="cta"?e.jsx(C,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-white",children:i.callToAction})]}),e.jsxs("div",{className:"p-4 bg-accent-purple/5 rounded-xl border border-accent-purple/20",children:[e.jsx("span",{className:"text-xs font-bold text-accent-purple uppercase block mb-2",children:"Visual Suggestions"}),e.jsx("ul",{className:"space-y-1",children:i.visualSuggestions.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-400",children:[e.jsx(S,{size:12,className:"mt-0.5 text-accent-purple"}),e.jsx("span",{children:s})]},t))})]}),e.jsx(u,{variant:"secondary",size:"sm",onClick:()=>N(xe(),"full"),className:"w-full",children:j==="full"?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:14,className:"mr-1"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{size:14,className:"mr-1"}),"Copy Full Script"]})})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`p-4 rounded-xl ${o.gemini?"bg-success/10 border border-success/20":"bg-warning/10 border border-warning/20"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${o.gemini?"bg-success/20":"bg-warning/20"}`,children:e.jsx(S,{size:16,className:o.gemini?"text-success":"text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${o.gemini?"text-success":"text-warning"}`,children:o.gemini?"Veo Video Generation Ready":"Gemini API Key Required"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o.gemini?"Powered by Google Veo 2. Videos are 4-8 seconds, 720p. Generation takes 1-6 minutes.":"Add your Gemini API key in Automation Hub to enable AI video generation with Google Veo."})]})]})}),e.jsxs(p,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Motion Prompt"}),e.jsx("textarea",{value:h,onChange:s=>F(s.target.value),placeholder:"Describe the video you want to create... e.g., 'A futuristic city at sunset with flying cars and neon lights'",rows:4,className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors resize-none"}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Prompt auto-filled from script. Edit as needed."})]}),e.jsxs(p,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Aspect Ratio"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ze.map(s=>e.jsxs("button",{onClick:()=>X(s.id),className:`
                    py-3 px-4 rounded-xl text-sm font-medium transition-all
                    flex flex-col items-center gap-2
                    ${V===s.id?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}
                  `,children:[s.icon,e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs opacity-60",children:s.id})]},s.id))})]}),e.jsxs(p,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Resolution"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ve.map(s=>e.jsx("button",{onClick:()=>ee(s),className:`
                    py-2.5 px-4 rounded-xl text-sm font-medium transition-all
                    ${_===s?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}
                  `,children:s},s))})]}),e.jsxs(p,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Source Image (Optional)"}),e.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:le,className:"hidden"}),e.jsx("button",{onClick:()=>{var s;return(s=q.current)==null?void 0:s.click()},className:"w-full py-8 border-2 border-dashed border-glass-border rounded-xl text-gray-400 hover:border-primary/50 hover:text-primary-light transition-all flex flex-col items-center gap-2",children:E?e.jsx("img",{src:E,alt:"Source",className:"h-20 object-contain rounded"}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:24}),e.jsx("span",{className:"text-sm",children:"Upload image to animate"})]})})]}),e.jsx(u,{variant:"primary",size:"lg",onClick:ce,disabled:!h.trim()||m||!o.gemini,className:"w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(B,{size:18,className:"animate-spin"}),O||A[L]]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{size:18}),"Generate Video with Veo"]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),e.jsx("div",{className:`bg-gray-900 rounded-xl overflow-hidden mx-auto max-w-md ${pe()}`,children:m?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-t-primary animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-t-accent-purple animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx("p",{className:"text-sm text-gray-400 animate-pulse",children:A[L]})]}):$?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("video",{ref:g,src:$,className:"w-full h-full object-cover",loop:!0,playsInline:!0,onPlay:()=>I(!0),onPause:()=>I(!1)}),e.jsx("button",{onClick:de,className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors",children:T?e.jsx(Ce,{size:48,className:"text-white"}):e.jsx(we,{size:48,className:"text-white"})})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-600",children:[e.jsx(S,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Video preview"})]})})]}),$&&!m&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3",children:[e.jsxs(u,{variant:"secondary",className:"flex-1",children:[e.jsx(be,{size:16}),"Regenerate"]}),e.jsxs(u,{variant:"primary",className:"flex-1",children:[e.jsx(ye,{size:16}),"Download"]})]})]})]})]})}export{Fe as VideoLab};

import{k,v as D,h as x,q as e,w as y,B as v,K as U,G as S,I as F,L as q,M as O}from"./index-BhtDYtLX.js";import{a as G}from"./ai-client-BJ6a5FrJ.js";import{E as B}from"./external-link-dwMKGnDs.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=k("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=k("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=k("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),K=[{id:"google",name:"Google Trends",enabled:!0},{id:"reddit",name:"Reddit",enabled:!0},{id:"hackernews",name:"Hacker News",enabled:!0}];async function Q(s=["technology","programming","startups"]){var o;const d=[];for(const r of s)try{const a=await fetch(`https://www.reddit.com/r/${r}/hot.json?limit=5`,{headers:{"User-Agent":"SOCI-TrendEngine/1.0"}});if(!a.ok)continue;(((o=(await a.json()).data)==null?void 0:o.children)||[]).forEach((u,n)=>{const i=u.data;d.push({id:`reddit-${r}-${n}`,topic:i.title,volume:i.score*100,sentiment:i.score>500?"positive":(i.score>100,"neutral"),relevance:Math.min(95,70+Math.floor(i.score/100)),source:`r/${r}`,sourceUrl:`https://reddit.com${i.permalink}`,timestamp:new Date().toISOString()})})}catch(a){console.warn(`Failed to fetch Reddit trends for r/${r}:`,a)}return d}async function Z(){try{const s=await fetch("https://hacker-news.firebaseio.com/v0/topstories.json");if(!s.ok)return[];const o=(await s.json()).slice(0,10);return(await Promise.all(o.map(async a=>{const l=await fetch(`https://hacker-news.firebaseio.com/v0/item/${a}.json`);return l.ok?l.json():null}))).filter(a=>a!==null&&a.title).map(a=>({id:`hn-${a.id}`,topic:a.title,volume:a.score*150,sentiment:a.score>200?"positive":"neutral",relevance:Math.min(92,65+Math.floor(a.score/50)),source:"Hacker News",sourceUrl:a.url||`https://news.ycombinator.com/item?id=${a.id}`,timestamp:new Date().toISOString()}))}catch(s){return console.warn("Failed to fetch Hacker News trends:",s),[]}}function V(){return[{topic:"AI Agents and Autonomous Systems",volume:185e3,sentiment:"positive"},{topic:"OpenAI GPT-5 Speculation",volume:142e3,sentiment:"positive"},{topic:"Claude AI New Features",volume:98e3,sentiment:"positive"},{topic:"React 19 Release Updates",volume:87e3,sentiment:"neutral"},{topic:"Rust for Web Development",volume:76e3,sentiment:"positive"},{topic:"Edge Computing Trends",volume:65e3,sentiment:"neutral"},{topic:"Web3 and Blockchain Resurgence",volume:54e3,sentiment:"neutral"},{topic:"Remote Work Tech Stack 2024",volume:48e3,sentiment:"positive"}].map((d,o)=>({id:`simulated-${o}`,topic:d.topic,volume:d.volume+Math.floor(Math.random()*1e4),sentiment:d.sentiment,relevance:Math.max(60,95-o*5),source:"Trend Analysis",sourceUrl:`https://google.com/search?q=${encodeURIComponent(d.topic)}`,timestamp:new Date().toISOString()}))}async function Y(s={}){const{sources:d=["reddit","hackernews"],niches:o=["technology","startups"],limit:r=15}=s,a=[],l=[];if(d.includes("reddit")){const n=o.flatMap(i=>{switch(i.toLowerCase()){case"technology":return["technology","programming","webdev"];case"startups":return["startups","Entrepreneur","smallbusiness"];case"ai":return["MachineLearning","artificial","ChatGPT"];case"finance":return["finance","investing","CryptoCurrency"];case"marketing":return["marketing","socialmedia","SEO"];default:return[i]}});l.push(Q([...new Set(n)].slice(0,5)))}return d.includes("hackernews")&&l.push(Z()),l.push(Promise.resolve(V())),(await Promise.allSettled(l)).forEach(n=>{n.status==="fulfilled"&&a.push(...n.value)}),a.reduce((n,i)=>(n.some(f=>f.topic.toLowerCase().includes(i.topic.toLowerCase().slice(0,20))||i.topic.toLowerCase().includes(f.topic.toLowerCase().slice(0,20)))||n.push(i),n),[]).sort((n,i)=>i.relevance-n.relevance||i.volume-n.volume).slice(0,r)}function _(s,d,o){const r=s.topic.toLowerCase(),a=d.toLowerCase();let l=s.relevance;return r.includes(a)&&(l+=15),o.forEach(m=>{r.includes(m.toLowerCase())&&(l+=10)}),s.volume>1e5&&(l+=5),s.volume>2e5&&(l+=5),s.sentiment==="positive"&&(l+=3),Math.min(100,l)}function J({trend:s,onDraftPost:d,onAnalyze:o,analysis:r,isAnalyzing:a}){const l=n=>{switch(n){case"positive":return"text-success bg-success/10";case"negative":return"text-critical bg-critical/10";default:return"text-gray-400 bg-gray-400/10"}},m=n=>n>=80?"bg-primary/20 text-primary-light":n>=60?"bg-accent-purple/20 text-accent-purple":"bg-gray-500/20 text-gray-400",u=(r==null?void 0:r.relevanceScore)??s.relevance;return e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel rounded-xl p-5 border border-glass-border hover:border-primary/30 transition-all duration-300",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${l(s.sentiment)}`,children:s.sentiment}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${m(u)}`,children:[u,"% Match"]}),r&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-accent-purple/20 text-accent-purple",children:"AI Analyzed"})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:s.topic}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s.volume/1e3).toFixed(0),"K mentions"]})]})}),r&&e.jsxs(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-accent-purple/5 rounded-lg border border-accent-purple/20",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:r.reasoning}),r.suggestedAngles.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Suggested Angles"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.suggestedAngles.slice(0,3).map((n,i)=>e.jsx("span",{className:"text-xs bg-white/5 px-2 py-0.5 rounded text-gray-300",children:n},i))})]}),r.bestPlatforms.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Best for:"}),r.bestPlatforms.map(n=>e.jsx("span",{className:"text-xs text-primary capitalize",children:n},n))]})]}),s.source&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Source"}),e.jsxs("a",{href:s.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:text-primary-light transition-colors",children:[s.source,e.jsx(B,{size:12})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{variant:"secondary",size:"sm",onClick:()=>o(s),disabled:a||!!r,className:"flex-1",children:[a?e.jsx(q,{size:14,className:"mr-1 animate-spin"}):e.jsx(M,{size:14,className:"mr-1"}),r?"Analyzed":"Analyze"]}),e.jsxs(v,{variant:"primary",size:"sm",onClick:()=>d(s),className:"flex-1",children:[e.jsx(O,{size:14,className:"mr-1"}),"Draft Post"]})]})]})}function w(){return e.jsxs("div",{className:"glass-panel rounded-xl p-5 border border-glass-border",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("div",{className:"skeleton h-5 w-16 rounded"}),e.jsx("div",{className:"skeleton h-5 w-20 rounded"})]}),e.jsx("div",{className:"skeleton h-6 w-3/4 rounded mb-2"}),e.jsx("div",{className:"skeleton h-4 w-1/4 rounded mb-4"}),e.jsx("div",{className:"skeleton h-9 w-full rounded"})]})}function te(){const{persona:s,setActiveView:d,addNotification:o,addActivity:r}=D(),[a,l]=x.useState([]),[m,u]=x.useState(!1),[n,i]=x.useState(""),[j,f]=x.useState({}),[C,A]=x.useState(null),[b,I]=x.useState(["reddit","hackernews"]),[T,$]=x.useState(!1);x.useEffect(()=>{z()},[]);const z=async()=>{u(!0);try{const c=[((s==null?void 0:s.niche)||"technology").toLowerCase()];s!=null&&s.topics&&s.topics.forEach(p=>{(p.toLowerCase().includes("ai")||p.toLowerCase().includes("machine learning"))&&c.push("ai"),(p.toLowerCase().includes("startup")||p.toLowerCase().includes("business"))&&c.push("startups"),(p.toLowerCase().includes("marketing")||p.toLowerCase().includes("social"))&&c.push("marketing")});const g=(await Y({sources:b,niches:[...new Set(c)],limit:12})).map(p=>({...p,relevance:_(p,(s==null?void 0:s.niche)||"Technology",(s==null?void 0:s.topics)||[])}));l(g),f({}),o({type:"success",title:"Trends Updated",message:`Found ${g.length} trending topics from ${b.length} sources`}),r({id:crypto.randomUUID(),action:"Trends Scanned",description:`Fetched ${g.length} trends from Reddit & Hacker News`,timestamp:new Date().toISOString(),status:"success"})}catch(t){console.error("Failed to fetch trends:",t),o({type:"error",title:"Fetch Failed",message:"Could not fetch trends. Using cached data."})}finally{u(!1)}},R=t=>{I(c=>c.includes(t)?c.filter(h=>h!==t):[...c,t])},L=async t=>{A(t.id);try{const c=await G(t.topic,(s==null?void 0:s.niche)||"Technology",(s==null?void 0:s.topics)||["innovation","productivity"]);f(h=>({...h,[t.id]:c})),r({id:crypto.randomUUID(),action:"Trend Analyzed",description:`AI analyzed "${t.topic}" - ${c.relevanceScore}% relevance`,timestamp:new Date().toISOString(),status:"success"}),o({type:"success",title:"Analysis Complete",message:`${t.topic} is ${c.relevanceScore}% relevant to your niche`})}catch(c){const h=c instanceof Error?c.message:String(c),g=h.includes("credit balance")||h.includes("too low");o({type:"error",title:g?"API Credits Depleted":"Analysis Failed",message:g?"Your Anthropic API credits are exhausted. Please add credits at console.anthropic.com or update your API key in Automation settings.":h||"Could not analyze trend"})}finally{A(null)}},E=t=>{d("content"),o({type:"info",title:"Topic Ready",message:`Use "${t.topic}" as your content topic`})},P=async()=>{for(const t of N.slice(0,4))j[t.id]||(await L(t),await new Promise(c=>setTimeout(c,500)))},N=a.filter(t=>t.topic.toLowerCase().includes(n.toLowerCase()));return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Trend Radar"}),e.jsx("p",{className:"text-gray-400",children:"Discover viral topics in your niche"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium bg-success/10 text-success",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-success"}),"AI Analysis ","Ready"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(v,{variant:"secondary",onClick:z,disabled:m,children:[e.jsx(U,{size:16,className:`mr-2 ${m?"animate-spin":""}`}),"Scan Trends"]}),e.jsxs(v,{variant:"primary",onClick:P,disabled:C!==null,children:[e.jsx(M,{size:16,className:"mr-2"}),"Analyze All with AI"]}),e.jsxs(v,{variant:"ghost",onClick:()=>$(!T),children:[e.jsx(W,{size:16,className:"mr-2"}),"Sources"]})]}),T&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(H,{size:16,className:"text-primary"}),e.jsx("h3",{className:"text-sm font-medium text-white",children:"Trend Sources"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(t=>e.jsx("button",{onClick:()=>R(t.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${b.includes(t.id)?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:t.name},t.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Select sources to scan for trending topics. Click "Scan Trends" to fetch new data.'})]})}),e.jsx(S,{className:"p-4",noPadding:!0,children:e.jsxs("div",{className:"relative p-4",children:[e.jsx(F,{size:18,className:"absolute left-7 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search trends...",value:n,onChange:t=>i(t.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 pl-12 pr-4 text-white placeholder-gray-500 focus:border-primary transition-colors"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m?e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(w,{}),e.jsx(w,{}),e.jsx(w,{})]}):N.length>0?N.map((t,c)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},children:e.jsx(J,{trend:t,onDraftPost:E,onAnalyze:L,analysis:j[t.id],isAnalyzing:C===t.id})},t.id)):e.jsxs(S,{className:"col-span-full p-12 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"No trends found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or refresh the trends"})]})})]})}export{te as TrendEngine};

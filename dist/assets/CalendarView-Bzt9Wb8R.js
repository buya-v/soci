import{k as $,a5 as N,a6 as w,a7 as I,a8 as q,a9 as B,aa as U,ab as Y,v as G,h as y,ac as X,q as s,w as F,B as k,P as J,G as S,C as K,x as _,A as Q,X as ee,N as te}from"./index-DOOXPvjG.js";import{s as O,a as se,f as h}from"./format-C16ZOTAS.js";import{P as ae}from"./pen-Dg5a-pJS.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=$("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function ie(t,e,a){const n=N(t,a==null?void 0:a.in);return isNaN(e)?w(t,NaN):(n.setDate(n.getDate()+e),n)}function R(t,e,a){const n=N(t,a==null?void 0:a.in);if(isNaN(e))return w(t,NaN);if(!e)return n;const r=n.getDate(),l=w(t,n.getTime());l.setMonth(n.getMonth()+e+1,0);const c=l.getDate();return r>=c?l:(n.setFullYear(l.getFullYear(),l.getMonth(),r),n)}function W(t,e,a){const[n,r]=I(a==null?void 0:a.in,t,e);return+O(n)==+O(r)}function le(t,e){const a=N(t,e==null?void 0:e.in);return a.setDate(1),a.setHours(0,0,0,0),a}function ce(t,e){var u,m;const a=q(),n=a.weekStartsOn??((m=(u=a.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,r=N(t,e==null?void 0:e.in),l=r.getDay(),c=(l<n?-7:0)+6-(l-n);return r.setDate(r.getDate()+c),r.setHours(23,59,59,999),r}function de(t,e,a){const[n,r]=I(a==null?void 0:a.in,t,e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function oe(t,e){return W(w(t,t),B(t))}function T(t,e){const a=()=>w(e==null?void 0:e.in,NaN),r=xe(t);let l;if(r.date){const d=fe(r.date,2);l=ge(d.restDateString,d.year)}if(!l||isNaN(+l))return a();const c=+l;let u=0,m;if(r.time&&(u=pe(r.time),isNaN(u)))return a();if(r.timezone){if(m=ye(r.timezone),isNaN(m))return a()}else{const d=new Date(c+u),o=N(0,e==null?void 0:e.in);return o.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),o.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),o}return N(c+u+m,e==null?void 0:e.in)}const v={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},me=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ue=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,he=/^([+-])(\d{2})(?::?(\d{2}))?$/;function xe(t){const e={},a=t.split(v.dateTimeDelimiter);let n;if(a.length>2)return e;if(/:/.test(a[0])?n=a[0]:(e.date=a[0],n=a[1],v.timeZoneDelimiter.test(e.date)&&(e.date=t.split(v.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const r=v.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function fe(t,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(a);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,l=n[2]?parseInt(n[2]):null;return{year:l===null?r:l*100,restDateString:t.slice((n[1]||n[2]).length)}}function ge(t,e){if(e===null)return new Date(NaN);const a=t.match(me);if(!a)return new Date(NaN);const n=!!a[4],r=D(a[1]),l=D(a[2])-1,c=D(a[3]),u=D(a[4]),m=D(a[5])-1;if(n)return we(e,u,m)?Ne(e,u,m):new Date(NaN);{const d=new Date(0);return!je(e,l,c)||!De(e,r)?new Date(NaN):(d.setUTCFullYear(e,l,Math.max(r,c)),d)}}function D(t){return t?parseInt(t):1}function pe(t){const e=t.match(ue);if(!e)return NaN;const a=P(e[1]),n=P(e[2]),r=P(e[3]);return Me(a,n,r)?a*U+n*Y+r*1e3:NaN}function P(t){return t&&parseFloat(t.replace(",","."))||0}function ye(t){if(t==="Z")return 0;const e=t.match(he);if(!e)return 0;const a=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return ve(n,r)?a*(n*U+r*Y):NaN}function Ne(t,e,a){const n=new Date(0);n.setUTCFullYear(t,0,4);const r=n.getUTCDay()||7,l=(e-1)*7+a+1-r;return n.setUTCDate(n.getUTCDate()+l),n}const be=[31,null,31,30,31,30,31,31,30,31,30,31];function H(t){return t%400===0||t%4===0&&t%100!==0}function je(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(be[e]||(H(t)?29:28))}function De(t,e){return e>=1&&e<=(H(t)?366:365)}function we(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function Me(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function ve(t,e){return e>=0&&e<=59}function ke(t,e,a){return R(t,-1,a)}const z={twitter:"bg-blue-500",linkedin:"bg-blue-700",instagram:"bg-pink-500",tiktok:"bg-gray-700"},C={twitter:"Twitter/X",linkedin:"LinkedIn",instagram:"Instagram",tiktok:"TikTok"};function Ce({post:t,onClose:e,onSchedule:a,onDelete:n}){const[r,l]=y.useState(t.scheduledFor?new Date(t.scheduledFor):new Date),[c,u]=y.useState(t.scheduledFor?h(new Date(t.scheduledFor),"HH:mm"):"09:00"),m=y.useMemo(()=>{const o=[];for(let p=0;p<24;p++)for(let x=0;x<60;x+=30)o.push(`${p.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`);return o},[]),d=()=>{const[o,p]=c.split(":").map(Number),x=new Date(r);x.setHours(o,p,0,0),a(x,c)};return s.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:e,children:s.jsxs(F.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass-panel rounded-2xl p-6 max-w-md w-full",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Schedule Post"}),s.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-white/5 transition-colors",children:s.jsx(ee,{size:20,className:"text-gray-400"})})]}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-xl mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`w-3 h-3 rounded-full ${z[t.platform]}`}),s.jsx("span",{className:"text-sm font-medium text-white capitalize",children:C[t.platform]})]}),s.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:t.content||t.caption})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Date"}),s.jsx("input",{type:"date",value:h(r,"yyyy-MM-dd"),onChange:o=>l(new Date(o.target.value)),min:h(new Date,"yyyy-MM-dd"),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Time"}),s.jsx("select",{value:c,onChange:o=>u(o.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors",children:m.map(o=>s.jsx("option",{value:o,className:"bg-surface",children:o},o))})]}),s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg border border-primary/20 mb-6",children:s.jsxs("p",{className:"text-xs text-primary",children:["Optimal times for ",C[t.platform],":",t.platform==="twitter"&&" 9:00 AM, 12:00 PM, 5:00 PM",t.platform==="linkedin"&&" 7:00 AM, 12:00 PM, 5:00 PM",t.platform==="instagram"&&" 11:00 AM, 2:00 PM, 7:00 PM",t.platform==="tiktok"&&" 7:00 PM, 8:00 PM, 9:00 PM"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(k,{variant:"ghost",onClick:n,className:"text-critical hover:bg-critical/10",children:[s.jsx(te,{size:16}),"Delete"]}),s.jsxs(k,{variant:"primary",onClick:d,className:"flex-1",children:[s.jsx(_,{size:16}),"Schedule"]})]})]})})}function Fe(){const{posts:t,updatePost:e,deletePost:a,addNotification:n,addPersistentNotification:r,setActiveView:l}=G(),[c,u]=y.useState(new Date),[m,d]=y.useState(null),[o,p]=y.useState("month"),x=t.filter(i=>i.status==="scheduled"&&i.scheduledFor),A=y.useMemo(()=>{const i=le(c),g=X(c),b=se(i),M=ce(g),j=[];let f=b;for(;f<=M;)j.push(f),f=ie(f,1);return j},[c]),L=i=>x.filter(g=>g.scheduledFor?W(T(g.scheduledFor),i):!1),Z=(i,g)=>{m&&(e(m.id,{status:"scheduled",scheduledFor:i.toISOString()}),n({type:"success",title:"Post Scheduled",message:`Post scheduled for ${h(i,"MMM d, yyyy")} at ${h(i,"h:mm a")}`}),r({type:"info",title:"Post Scheduled",message:`Your ${C[m.platform]} post is scheduled for ${h(i,"MMM d")} at ${h(i,"h:mm a")}`,category:"schedule"}),d(null))},E=()=>{m&&(a(m.id),n({type:"info",title:"Post Deleted",message:"The scheduled post has been deleted"}),d(null))},V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Content Calendar"}),s.jsx("p",{className:"text-gray-400",children:"Schedule and manage your posts"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs(k,{variant:"secondary",onClick:()=>l("content"),children:[s.jsx(J,{size:16}),"Create Post"]})})]}),s.jsx(S,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>u(ke(c)),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",children:s.jsx(ne,{size:20,className:"text-gray-400"})}),s.jsx("h2",{className:"text-lg font-semibold text-white min-w-[180px] text-center",children:h(c,"MMMM yyyy")}),s.jsx("button",{onClick:()=>u(R(c,1)),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",children:s.jsx(re,{size:20,className:"text-gray-400"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>u(new Date),className:"px-3 py-1.5 text-sm text-primary hover:bg-primary/10 rounded-lg transition-colors",children:"Today"}),s.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>p("week"),className:`px-3 py-1 text-sm rounded-md transition-colors ${o==="week"?"bg-primary/20 text-primary":"text-gray-400 hover:text-white"}`,children:"Week"}),s.jsx("button",{onClick:()=>p("month"),className:`px-3 py-1 text-sm rounded-md transition-colors ${o==="month"?"bg-primary/20 text-primary":"text-gray-400 hover:text-white"}`,children:"Month"})]})]})]})}),s.jsxs(S,{className:"p-4 lg:p-6",children:[s.jsx("div",{className:"grid grid-cols-7 mb-2",children:V.map(i=>s.jsx("div",{className:"p-2 text-center text-xs font-medium text-gray-500",children:i},i))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:A.map((i,g)=>{const b=L(i),M=de(i,c),j=oe(i);return s.jsxs("div",{className:`min-h-[100px] p-2 rounded-lg border transition-colors ${M?"border-glass-border hover:border-primary/30":"border-transparent opacity-40"} ${j?"bg-primary/5 border-primary/30":""}`,children:[s.jsx("div",{className:`text-sm font-medium mb-1 ${j?"text-primary":M?"text-white":"text-gray-600"}`,children:h(i,"d")}),s.jsxs("div",{className:"space-y-1",children:[b.slice(0,3).map(f=>s.jsx("button",{onClick:()=>d(f),className:`w-full text-left px-2 py-1 rounded text-[10px] text-white truncate hover:opacity-80 transition-opacity ${z[f.platform]}`,children:f.scheduledFor&&h(T(f.scheduledFor),"h:mm a")},f.id)),b.length>3&&s.jsxs("p",{className:"text-[10px] text-gray-500 px-2",children:["+",b.length-3," more"]})]})]},g)})})]}),s.jsxs(S,{className:"p-4 lg:p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Upcoming Posts"}),x.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(K,{size:48,className:"mx-auto mb-4 text-gray-600"}),s.jsx("p",{className:"text-gray-400 mb-2",children:"No scheduled posts"}),s.jsx(k,{variant:"primary",size:"sm",onClick:()=>l("drafts"),children:"Schedule from Drafts"})]}):s.jsx("div",{className:"space-y-3",children:x.sort((i,g)=>new Date(i.scheduledFor).getTime()-new Date(g.scheduledFor).getTime()).slice(0,5).map(i=>s.jsxs("button",{onClick:()=>d(i),className:"w-full flex items-center gap-4 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors text-left",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg ${z[i.platform]} flex items-center justify-center`,children:s.jsx(_,{size:18,className:"text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-white truncate",children:i.content||i.caption}),s.jsxs("p",{className:"text-xs text-gray-500",children:[C[i.platform]," â€¢ ",i.scheduledFor&&h(T(i.scheduledFor),"MMM d, h:mm a")]})]}),s.jsx(ae,{size:16,className:"text-gray-500"})]},i.id))})]}),s.jsx(Q,{children:m&&s.jsx(Ce,{post:m,onClose:()=>d(null),onSchedule:Z,onDelete:E})})]})}export{Fe as CalendarView};

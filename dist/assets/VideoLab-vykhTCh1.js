import{k as G,v as ge,h as a,K as he,av as be,q as e,w as S,G as x,F as ye,D as B,B as g,M as Z,Y as C,aw as fe,N as je,J as ve,ax as Ne,ay as we,az as ke,aA as Se}from"./index-By5IX9LS.js";import{C as Ce}from"./chevron-down-Ddol0Fnx.js";import{C as A}from"./check-BzChNA_O.js";import{C as P}from"./copy-DVhqKQHn.js";import{P as Ae}from"./play-DSc14mkH.js";import{S as Pe}from"./square-Cs4EzwXJ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=G("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=G("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=G("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Q=[{id:"educational",label:"Educational",description:"Informative & teaching"},{id:"promotional",label:"Promotional",description:"Product or brand focused"},{id:"storytelling",label:"Storytelling",description:"Narrative & engaging"},{id:"tutorial",label:"Tutorial",description:"Step-by-step guide"}],X=[{id:"tiktok",label:"TikTok",maxDuration:"60s"},{id:"instagram",label:"Reels",maxDuration:"90s"},{id:"youtube",label:"YouTube Shorts",maxDuration:"60s"},{id:"linkedin",label:"LinkedIn",maxDuration:"2min"}],z=["Starting video generation...","AI is creating your video...","Synthesizing frames...","Rendering motion...","Adding cinematic effects...","Almost there..."],Ve=[{id:"16:9",label:"Landscape",icon:e.jsx(we,{size:16})},{id:"9:16",label:"Portrait",icon:e.jsx(Ie,{size:16})},{id:"1:1",label:"Square",icon:e.jsx(Pe,{size:16})}],$e=["720p","1080p"];function Le(){const{apiKeys:i,addNotification:c}=ge(),[h,E]=a.useState(""),[I,_]=a.useState("16:9"),[ee,se]=a.useState("1080p"),[M,te]=a.useState(null),[m,L]=a.useState(!1),[U,R]=a.useState(0),[V,q]=a.useState(null),[$,T]=a.useState(!1),b=a.useRef(null),K=a.useRef(null),[O,ae]=a.useState(!0),[y,ie]=a.useState(""),[f,re]=a.useState("educational"),[j,ne]=a.useState("tiktok"),[H,J]=a.useState(!1),[r,oe]=a.useState(null),[v,Y]=a.useState(null),[D,N]=a.useState("");a.useEffect(()=>{i.anthropic&&he(i.anthropic),i.gemini&&be(i.gemini)},[i.anthropic,i.gemini]);const u=ke(),le=Se();a.useEffect(()=>{if(!m||D)return;const s=setInterval(()=>{R(t=>(t+1)%z.length)},5e3);return()=>clearInterval(s)},[m,D]);const ce=s=>{var o;const t=(o=s.target.files)==null?void 0:o[0];if(t){const l=new FileReader;l.onloadend=()=>{te(l.result)},l.readAsDataURL(t)}},de=async()=>{var s,t;if(h.trim()){if(!i.gemini){c({type:"warning",title:"API Key Required",message:"Configure Gemini API key in Automation Hub to generate videos with Veo"});return}L(!0),R(0),q(null),N("Starting video generation...");try{const o=await fetch("/api/video/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:h.slice(0,1024),aspectRatio:I==="9:16"?"9:16":"16:9",apiKey:i.gemini})}),l=await o.json();if(!o.ok)throw new Error(l.error||"Failed to start video generation");const k=(s=l.operation)==null?void 0:s.name;if(!k)throw new Error("No operation name returned");N("Video generation in progress...");const n=60;let d=0;for(;d<n;){await new Promise(F=>setTimeout(F,1e4));const W=await fetch("/api/video/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationName:k,apiKey:i.gemini})}),p=await W.json();if(!W.ok)throw new Error(p.error||"Failed to check status");if(p.done){if(p.success&&((t=p.video)!=null&&t.uri))q(p.video.uri),N(""),c({type:"success",title:"Video Generated",message:"Your AI video is ready!"});else throw new Error(p.error||"Video generation failed");break}d++,R(F=>(F+1)%z.length)}if(d>=n)throw new Error("Video generation timed out. Please try again.")}catch(o){const l=o instanceof Error?o.message:"Failed to generate video";N(""),c({type:"error",title:"Video Generation Failed",message:l})}finally{L(!1)}}},me=()=>{b.current&&($?b.current.pause():b.current.play(),T(!$))},pe=async()=>{if(y.trim()){if(!u){c({type:"warning",title:"API Key Required",message:"Configure Anthropic or Gemini API key in Automation Hub"});return}J(!0);try{const s=X.find(d=>d.id===j),t=Q.find(d=>d.id===f),o=`You are an expert video scriptwriter specializing in short-form social media content. Create engaging, platform-optimized scripts that capture attention immediately.

Output format: Respond with valid JSON only, no markdown, no code blocks.`,l=`Create a ${f} video script for ${j} about: "${y}"

Requirements:
- Platform: ${s==null?void 0:s.label} (max ${s==null?void 0:s.maxDuration})
- Style: ${t==null?void 0:t.description}
- Must start with a strong hook (first 3 seconds are crucial)
- Include visual suggestions for each section
- End with a clear call-to-action

Respond with this exact JSON structure:
{
  "hook": "The attention-grabbing opening line (spoken in first 3 seconds)",
  "body": ["Point 1 with key message", "Point 2 with supporting info", "Point 3 with value/insight"],
  "callToAction": "What viewers should do next",
  "visualSuggestions": ["Visual for hook", "Visual for body section", "Visual for CTA"],
  "duration": "Estimated video duration"
}

Make the script conversational, authentic, and optimized for ${j}'s audience.`,k=await Ne(o,l,1024),n=JSON.parse(k);oe({hook:n.hook||"",body:Array.isArray(n.body)?n.body:[],callToAction:n.callToAction||"",visualSuggestions:Array.isArray(n.visualSuggestions)?n.visualSuggestions:[],duration:n.duration||"30-60s"}),E(`${n.hook} - ${n.body.join(". ")} Visual style: cinematic, engaging, ${f}`),c({type:"success",title:"Script Generated",message:"Your video script is ready. Review and customize as needed."})}catch(s){c({type:"error",title:"Script Generation Failed",message:s instanceof Error?s.message:"Could not generate script"})}finally{J(!1)}}},w=async(s,t)=>{try{await navigator.clipboard.writeText(s),Y(t),setTimeout(()=>Y(null),2e3)}catch{c({type:"error",title:"Copy Failed",message:"Could not copy to clipboard"})}},xe=()=>r?`HOOK:
${r.hook}

BODY:
${r.body.map((s,t)=>`${t+1}. ${s}`).join(`
`)}

CALL TO ACTION:
${r.callToAction}

VISUAL SUGGESTIONS:
${r.visualSuggestions.map((s,t)=>`${t+1}. ${s}`).join(`
`)}`:"",ue=()=>{switch(I){case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]";case"1:1":return"aspect-square"}};return e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Video Lab"}),e.jsx("p",{className:"text-gray-400",children:"Create AI-powered video content from text prompts"})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${u?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${u?"bg-success":"bg-warning"}`}),u?`Script AI (${le==="gemini"?"Gemini":"Claude"})`:"Script AI Not Configured"]})]}),e.jsxs(x,{className:"p-6",children:[e.jsxs("button",{onClick:()=>ae(!O),className:"w-full flex items-center justify-between text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent-purple/20",children:e.jsx(ye,{size:20,className:"text-accent-purple"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"AI Script Writer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Generate platform-optimized video scripts"})]})]}),O?e.jsx(ze,{size:20,className:"text-gray-400"}):e.jsx(Ce,{size:20,className:"text-gray-400"})]}),e.jsx(B,{children:O&&e.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video Topic"}),e.jsx("input",{type:"text",value:y,onChange:s=>ie(s.target.value),placeholder:"e.g., 5 productivity tips for remote workers",className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:X.map(s=>e.jsxs("button",{onClick:()=>ne(s.id),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${j===s.id?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:[e.jsx("span",{className:"block",children:s.label}),e.jsx("span",{className:"text-[10px] opacity-60",children:s.maxDuration})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Style"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Q.map(s=>e.jsx("button",{onClick:()=>re(s.id),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${f===s.id?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:s.label},s.id))})]})]}),e.jsx(g,{variant:"primary",onClick:pe,disabled:!y.trim()||H||!u,className:"w-full",children:H?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:16,className:"animate-spin mr-2"}),"Writing Script..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{size:16,className:"mr-2"}),"Generate Script"]})}),e.jsx(B,{children:r&&e.jsxs(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4 pt-4 border-t border-glass-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Estimated Duration"}),e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full font-medium",children:r.duration})]}),e.jsxs("div",{className:"p-4 bg-accent-pink/5 rounded-xl border border-accent-pink/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-accent-pink uppercase",children:"Hook (0-3s)"}),e.jsx("button",{onClick:()=>w(r.hook,"hook"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:v==="hook"?e.jsx(A,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-white",children:r.hook})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-glass-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Main Content"}),e.jsx("button",{onClick:()=>w(r.body.join(`
`),"body"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:v==="body"?e.jsx(A,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("ul",{className:"space-y-2",children:r.body.map((s,t)=>e.jsxs("li",{className:"flex gap-2 text-sm text-gray-300",children:[e.jsxs("span",{className:"text-primary font-medium",children:[t+1,"."]}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{className:"p-4 bg-success/5 rounded-xl border border-success/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-success uppercase",children:"Call to Action"}),e.jsx("button",{onClick:()=>w(r.callToAction,"cta"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:v==="cta"?e.jsx(A,{size:14,className:"text-success"}):e.jsx(P,{size:14,className:"text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-white",children:r.callToAction})]}),e.jsxs("div",{className:"p-4 bg-accent-purple/5 rounded-xl border border-accent-purple/20",children:[e.jsx("span",{className:"text-xs font-bold text-accent-purple uppercase block mb-2",children:"Visual Suggestions"}),e.jsx("ul",{className:"space-y-1",children:r.visualSuggestions.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-400",children:[e.jsx(C,{size:12,className:"mt-0.5 text-accent-purple"}),e.jsx("span",{children:s})]},t))})]}),e.jsx(g,{variant:"secondary",size:"sm",onClick:()=>w(xe(),"full"),className:"w-full",children:v==="full"?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:14,className:"mr-1"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{size:14,className:"mr-1"}),"Copy Full Script"]})})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`p-4 rounded-xl ${i.gemini?"bg-success/10 border border-success/20":"bg-warning/10 border border-warning/20"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i.gemini?"bg-success/20":"bg-warning/20"}`,children:e.jsx(C,{size:16,className:i.gemini?"text-success":"text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${i.gemini?"text-success":"text-warning"}`,children:i.gemini?"Veo Video Generation Ready":"Gemini API Key Required"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i.gemini?"Powered by Google Veo 2. Videos are 4-8 seconds, 720p. Generation takes 1-6 minutes.":"Add your Gemini API key in Automation Hub to enable AI video generation with Google Veo."})]})]})}),e.jsxs(x,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Motion Prompt"}),e.jsx("textarea",{value:h,onChange:s=>E(s.target.value),placeholder:"Describe the video you want to create... e.g., 'A futuristic city at sunset with flying cars and neon lights'",rows:4,className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors resize-none"}),r&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Prompt auto-filled from script. Edit as needed."})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Aspect Ratio"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ve.map(s=>e.jsxs("button",{onClick:()=>_(s.id),className:`
                    py-3 px-4 rounded-xl text-sm font-medium transition-all
                    flex flex-col items-center gap-2
                    ${I===s.id?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}
                  `,children:[s.icon,e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs opacity-60",children:s.id})]},s.id))})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Resolution"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$e.map(s=>e.jsx("button",{onClick:()=>se(s),className:`
                    py-2.5 px-4 rounded-xl text-sm font-medium transition-all
                    ${ee===s?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}
                  `,children:s},s))})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Source Image (Optional)"}),e.jsx("input",{ref:K,type:"file",accept:"image/*",onChange:ce,className:"hidden"}),e.jsx("button",{onClick:()=>{var s;return(s=K.current)==null?void 0:s.click()},className:"w-full py-8 border-2 border-dashed border-glass-border rounded-xl text-gray-400 hover:border-primary/50 hover:text-primary-light transition-all flex flex-col items-center gap-2",children:M?e.jsx("img",{src:M,alt:"Source",className:"h-20 object-contain rounded"}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{size:24}),e.jsx("span",{className:"text-sm",children:"Upload image to animate"})]})})]}),e.jsx(g,{variant:"primary",size:"lg",onClick:de,disabled:!h.trim()||m||!i.gemini,className:"w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:18,className:"animate-spin"}),D||z[U]]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{size:18}),"Generate Video with Veo"]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),e.jsx("div",{className:`bg-gray-900 rounded-xl overflow-hidden mx-auto max-w-md ${ue()}`,children:m?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-t-primary animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-t-accent-purple animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx("p",{className:"text-sm text-gray-400 animate-pulse",children:z[U]})]}):V?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("video",{ref:b,src:V,className:"w-full h-full object-cover",loop:!0,playsInline:!0,onPlay:()=>T(!0),onPause:()=>T(!1)}),e.jsx("button",{onClick:me,className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors",children:$?e.jsx(Ge,{size:48,className:"text-white"}):e.jsx(Ae,{size:48,className:"text-white"})})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-600",children:[e.jsx(C,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Video preview"})]})})]}),V&&!m&&e.jsxs(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3",children:[e.jsxs(g,{variant:"secondary",className:"flex-1",children:[e.jsx(je,{size:16}),"Regenerate"]}),e.jsxs(g,{variant:"primary",className:"flex-1",children:[e.jsx(ve,{size:16}),"Download"]})]})]})]})]})}export{Le as VideoLab};

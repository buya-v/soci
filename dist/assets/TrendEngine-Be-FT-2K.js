import{k as S,v as q,h as p,K as F,q as e,w as v,B as w,L as O,G as k,I as H,M as G,N as B,O as K,P as W}from"./index-By5IX9LS.js";import{E as Q}from"./external-link-5h9TP0QF.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=S("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=S("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=S("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Y=[{id:"google",name:"Google Trends",enabled:!0},{id:"reddit",name:"Reddit",enabled:!0},{id:"hackernews",name:"Hacker News",enabled:!0}];async function _(n=["technology","programming","startups"]){var d;const t=[];for(const s of n)try{const r=await fetch(`https://www.reddit.com/r/${s}/hot.json?limit=5`,{headers:{"User-Agent":"SOCI-TrendEngine/1.0"}});if(!r.ok)continue;(((d=(await r.json()).data)==null?void 0:d.children)||[]).forEach((m,i)=>{const c=m.data;t.push({id:`reddit-${s}-${i}`,topic:c.title,volume:c.score*100,sentiment:c.score>500?"positive":(c.score>100,"neutral"),relevance:Math.min(95,70+Math.floor(c.score/100)),source:`r/${s}`,sourceUrl:`https://reddit.com${c.permalink}`,timestamp:new Date().toISOString()})})}catch(r){console.warn(`Failed to fetch Reddit trends for r/${s}:`,r)}return t}async function J(){try{const n=await fetch("https://hacker-news.firebaseio.com/v0/topstories.json");if(!n.ok)return[];const d=(await n.json()).slice(0,10);return(await Promise.all(d.map(async r=>{const l=await fetch(`https://hacker-news.firebaseio.com/v0/item/${r}.json`);return l.ok?l.json():null}))).filter(r=>r!==null&&r.title).map(r=>({id:`hn-${r.id}`,topic:r.title,volume:r.score*150,sentiment:r.score>200?"positive":"neutral",relevance:Math.min(92,65+Math.floor(r.score/50)),source:"Hacker News",sourceUrl:r.url||`https://news.ycombinator.com/item?id=${r.id}`,timestamp:new Date().toISOString()}))}catch(n){return console.warn("Failed to fetch Hacker News trends:",n),[]}}function X(){return[{topic:"AI Agents and Autonomous Systems",volume:185e3,sentiment:"positive"},{topic:"OpenAI GPT-5 Speculation",volume:142e3,sentiment:"positive"},{topic:"Claude AI New Features",volume:98e3,sentiment:"positive"},{topic:"React 19 Release Updates",volume:87e3,sentiment:"neutral"},{topic:"Rust for Web Development",volume:76e3,sentiment:"positive"},{topic:"Edge Computing Trends",volume:65e3,sentiment:"neutral"},{topic:"Web3 and Blockchain Resurgence",volume:54e3,sentiment:"neutral"},{topic:"Remote Work Tech Stack 2024",volume:48e3,sentiment:"positive"}].map((t,d)=>({id:`simulated-${d}`,topic:t.topic,volume:t.volume+Math.floor(Math.random()*1e4),sentiment:t.sentiment,relevance:Math.max(60,95-d*5),source:"Trend Analysis",sourceUrl:`https://google.com/search?q=${encodeURIComponent(t.topic)}`,timestamp:new Date().toISOString()}))}async function ee(n={}){const{sources:t=["reddit","hackernews"],niches:d=["technology","startups"],limit:s=15}=n,r=[],l=[];if(t.includes("reddit")){const i=d.flatMap(c=>{switch(c.toLowerCase()){case"technology":return["technology","programming","webdev"];case"startups":return["startups","Entrepreneur","smallbusiness"];case"ai":return["MachineLearning","artificial","ChatGPT"];case"finance":return["finance","investing","CryptoCurrency"];case"marketing":return["marketing","socialmedia","SEO"];default:return[c]}});l.push(_([...new Set(i)].slice(0,5)))}return t.includes("hackernews")&&l.push(J()),l.push(Promise.resolve(X())),(await Promise.allSettled(l)).forEach(i=>{i.status==="fulfilled"&&r.push(...i.value)}),r.reduce((i,c)=>(i.some(y=>y.topic.toLowerCase().includes(c.topic.toLowerCase().slice(0,20))||c.topic.toLowerCase().includes(y.topic.toLowerCase().slice(0,20)))||i.push(c),i),[]).sort((i,c)=>c.relevance-i.relevance||c.volume-i.volume).slice(0,s)}function te(n,t,d){const s=n.topic.toLowerCase(),r=t.toLowerCase();let l=n.relevance;return s.includes(r)&&(l+=15),d.forEach(x=>{s.includes(x.toLowerCase())&&(l+=10)}),n.volume>1e5&&(l+=5),n.volume>2e5&&(l+=5),n.sentiment==="positive"&&(l+=3),Math.min(100,l)}function se({trend:n,onDraftPost:t,onAnalyze:d,analysis:s,isAnalyzing:r}){const l=i=>{switch(i){case"positive":return"text-success bg-success/10";case"negative":return"text-critical bg-critical/10";default:return"text-gray-400 bg-gray-400/10"}},x=i=>i>=80?"bg-primary/20 text-primary-light":i>=60?"bg-accent-purple/20 text-accent-purple":"bg-gray-500/20 text-gray-400",m=(s==null?void 0:s.relevanceScore)??n.relevance;return e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel rounded-xl p-5 border border-glass-border hover:border-primary/30 transition-all duration-300",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${l(n.sentiment)}`,children:n.sentiment}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${x(m)}`,children:[m,"% Match"]}),s&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-accent-purple/20 text-accent-purple",children:"AI Analyzed"})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:n.topic}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(n.volume/1e3).toFixed(0),"K mentions"]})]})}),s&&e.jsxs(v.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-accent-purple/5 rounded-lg border border-accent-purple/20",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.reasoning}),s.suggestedAngles.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Suggested Angles"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.suggestedAngles.slice(0,3).map((i,c)=>e.jsx("span",{className:"text-xs bg-white/5 px-2 py-0.5 rounded text-gray-300",children:i},c))})]}),s.bestPlatforms.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Best for:"}),s.bestPlatforms.map(i=>e.jsx("span",{className:"text-xs text-primary capitalize",children:i},i))]})]}),n.source&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Source"}),e.jsxs("a",{href:n.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:text-primary-light transition-colors",children:[n.source,e.jsx(Q,{size:12})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"secondary",size:"sm",onClick:()=>d(n),disabled:r||!!s,className:"flex-1",children:[r?e.jsx(G,{size:14,className:"mr-1 animate-spin"}):e.jsx($,{size:14,className:"mr-1"}),s?"Analyzed":"Analyze"]}),e.jsxs(w,{variant:"primary",size:"sm",onClick:()=>t(n),className:"flex-1",children:[e.jsx(B,{size:14,className:"mr-1"}),"Draft Post"]})]})]})}function b(){return e.jsxs("div",{className:"glass-panel rounded-xl p-5 border border-glass-border",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("div",{className:"skeleton h-5 w-16 rounded"}),e.jsx("div",{className:"skeleton h-5 w-20 rounded"})]}),e.jsx("div",{className:"skeleton h-6 w-3/4 rounded mb-2"}),e.jsx("div",{className:"skeleton h-4 w-1/4 rounded mb-4"}),e.jsx("div",{className:"skeleton h-9 w-full rounded"})]})}function re(){const{apiKeys:n,persona:t,setActiveView:d,addNotification:s,addActivity:r}=q(),[l,x]=p.useState([]),[m,i]=p.useState(!1),[c,A]=p.useState(""),[y,C]=p.useState({}),[T,I]=p.useState(null),[j,R]=p.useState(["reddit","hackernews"]),[z,P]=p.useState(!1);p.useEffect(()=>{n.anthropic&&F(n.anthropic)},[n.anthropic]),p.useEffect(()=>{L()},[]);const g=W(),L=async()=>{i(!0);try{const o=[((t==null?void 0:t.niche)||"technology").toLowerCase()];t!=null&&t.topics&&t.topics.forEach(u=>{(u.toLowerCase().includes("ai")||u.toLowerCase().includes("machine learning"))&&o.push("ai"),(u.toLowerCase().includes("startup")||u.toLowerCase().includes("business"))&&o.push("startups"),(u.toLowerCase().includes("marketing")||u.toLowerCase().includes("social"))&&o.push("marketing")});const f=(await ee({sources:j,niches:[...new Set(o)],limit:12})).map(u=>({...u,relevance:te(u,(t==null?void 0:t.niche)||"Technology",(t==null?void 0:t.topics)||[])}));x(f),C({}),s({type:"success",title:"Trends Updated",message:`Found ${f.length} trending topics from ${j.length} sources`}),r({id:crypto.randomUUID(),action:"Trends Scanned",description:`Fetched ${f.length} trends from Reddit & Hacker News`,timestamp:new Date().toISOString(),status:"success"})}catch(a){console.error("Failed to fetch trends:",a),s({type:"error",title:"Fetch Failed",message:"Could not fetch trends. Using cached data."})}finally{i(!1)}},E=a=>{R(o=>o.includes(a)?o.filter(h=>h!==a):[...o,a])},M=async a=>{if(!g){s({type:"warning",title:"API Key Required",message:"Configure Anthropic API key in Automation Hub"});return}I(a.id);try{const o=await K(a.topic,(t==null?void 0:t.niche)||"Technology",(t==null?void 0:t.topics)||["innovation","productivity"]);C(h=>({...h,[a.id]:o})),r({id:crypto.randomUUID(),action:"Trend Analyzed",description:`AI analyzed "${a.topic}" - ${o.relevanceScore}% relevance`,timestamp:new Date().toISOString(),status:"success"}),s({type:"success",title:"Analysis Complete",message:`${a.topic} is ${o.relevanceScore}% relevant to your niche`})}catch(o){const h=o instanceof Error?o.message:String(o),f=h.includes("credit balance")||h.includes("too low");s({type:"error",title:f?"API Credits Depleted":"Analysis Failed",message:f?"Your Anthropic API credits are exhausted. Please add credits at console.anthropic.com or update your API key in Automation settings.":h||"Could not analyze trend"})}finally{I(null)}},D=a=>{d("content"),s({type:"info",title:"Topic Ready",message:`Use "${a.topic}" as your content topic`})},U=async()=>{if(!g){s({type:"warning",title:"API Key Required",message:"Configure Anthropic API key in Automation Hub"});return}for(const a of N.slice(0,4))y[a.id]||(await M(a),await new Promise(o=>setTimeout(o,500)))},N=l.filter(a=>a.topic.toLowerCase().includes(c.toLowerCase()));return e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Trend Radar"}),e.jsx("p",{className:"text-gray-400",children:"Discover viral topics in your niche"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${g?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${g?"bg-success":"bg-warning"}`}),"AI Analysis ",g?"Ready":"Not Configured"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(w,{variant:"secondary",onClick:L,disabled:m,children:[e.jsx(O,{size:16,className:`mr-2 ${m?"animate-spin":""}`}),"Scan Trends"]}),e.jsxs(w,{variant:"primary",onClick:U,disabled:!g||T!==null,children:[e.jsx($,{size:16,className:"mr-2"}),"Analyze All with AI"]}),e.jsxs(w,{variant:"ghost",onClick:()=>P(!z),children:[e.jsx(V,{size:16,className:"mr-2"}),"Sources"]})]}),z&&e.jsx(v.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Z,{size:16,className:"text-primary"}),e.jsx("h3",{className:"text-sm font-medium text-white",children:"Trend Sources"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(a=>e.jsx("button",{onClick:()=>E(a.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${j.includes(a.id)?"bg-primary/20 text-primary-light border border-primary/30":"bg-white/5 text-gray-400 border border-glass-border hover:border-glass-border-hover"}`,children:a.name},a.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Select sources to scan for trending topics. Click "Scan Trends" to fetch new data.'})]})}),e.jsx(k,{className:"p-4",noPadding:!0,children:e.jsxs("div",{className:"relative p-4",children:[e.jsx(H,{size:18,className:"absolute left-7 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search trends...",value:c,onChange:a=>A(a.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 pl-12 pr-4 text-white placeholder-gray-500 focus:border-primary transition-colors"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m?e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(b,{}),e.jsx(b,{}),e.jsx(b,{})]}):N.length>0?N.map((a,o)=>e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:e.jsx(se,{trend:a,onDraftPost:D,onAnalyze:M,analysis:y[a.id],isAnalyzing:T===a.id})},a.id)):e.jsxs(k,{className:"col-span-full p-12 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"No trends found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or refresh the trends"})]})})]})}export{re as TrendEngine};

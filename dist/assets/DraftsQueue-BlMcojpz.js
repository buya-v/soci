import{$ as Le,a0 as $,a1 as Ie,h as d,a2 as Me,a3 as $e,a4 as Ee,a5 as Ue,a6 as F,a7 as Oe,a8 as Fe,w as j,q as e,a9 as Ve,k as X,v as Be,G as I,F as W,y as _,I as K,D as z,X as T,B as b,J as Re,z as V,C as E,_ as ee,A as Xe,M as He}from"./index-BrhPkTvR.js";import{F as qe,D as Ge,b as Qe,e as Je}from"./export-BJOnzrJx.js";import{i as We,p as Ye}from"./twitter-DNHQb-0t.js";import{C as U}from"./check-VZRFgOYN.js";import{S as te}from"./square-DPHwCXkn.js";import{F as Ze}from"./filter-BByzcdaa.js";import{M as _e,S as B,L as Ke}from"./send-Cp46MuAH.js";import{C as et}from"./copy-DzJwWNMT.js";import{S as R}from"./share-2-x2UfMqei.js";import"./format-C9sSOKn3.js";function tt(...t){const i=!Array.isArray(t[0]),c=i?0:-1,r=t[0+c],n=t[1+c],l=t[2+c],o=t[3+c],x=Le(n,l,o);return i?x(r):x}function se(t){const i=$(()=>Ie(t)),{isStatic:c}=d.useContext(Me);if(c){const[,r]=d.useState(t);d.useEffect(()=>i.on("change",r),[])}return i}function ae(t,i){const c=se(i()),r=()=>c.set(i());return r(),$e(()=>{const n=()=>Ee.preRender(r,!1,!0),l=t.map(o=>o.on("change",n));return()=>{l.forEach(o=>o()),Ue(r)}}),c}function st(t){F.current=[],t();const i=ae(F.current,t);return F.current=void 0,i}function at(t,i,c,r){if(typeof t=="function")return st(t);const n=typeof i=="function"?i:tt(i,c,r);return Array.isArray(t)?Y(t,n):Y([t],([l])=>n(l))}function Y(t,i){const c=$(()=>[]);return ae(t,()=>{c.length=0;const r=t.length;for(let n=0;n<r;n++)c[n]=t[n].get();return i(c)})}const le=d.createContext(null);function lt(t,i,c,r){if(!r)return t;const n=t.findIndex(m=>m.value===i);if(n===-1)return t;const l=r>0?1:-1,o=t[n+l];if(!o)return t;const x=t[n],s=o.layout,p=Oe(s.min,s.max,.5);return l===1&&x.layout.max+c>p||l===-1&&x.layout.min+c<p?Fe(t,n,n+l):t}function rt({children:t,as:i="ul",axis:c="y",onReorder:r,values:n,...l},o){const x=$(()=>j[i]),s=[],p=d.useRef(!1),m={axis:c,registerItem:(u,f)=>{const N=s.findIndex(w=>u===w.value);N!==-1?s[N].layout=f[c]:s.push({value:u,layout:f[c]}),s.sort(ct)},updateOrder:(u,f,N)=>{if(p.current)return;const w=lt(s,u,f,N);s!==w&&(p.current=!0,r(w.map(nt).filter(v=>n.indexOf(v)!==-1)))}};return d.useEffect(()=>{p.current=!1}),e.jsx(x,{...l,ref:o,ignoreStrict:!0,children:e.jsx(le.Provider,{value:m,children:t})})}const it=d.forwardRef(rt);function nt(t){return t.value}function ct(t,i){return t.layout.min-i.layout.min}function Z(t,i=0){return Ve(t)?t:se(i)}function ot({children:t,style:i={},value:c,as:r="li",onDrag:n,layout:l=!0,...o},x){const s=$(()=>j[r]),p=d.useContext(le),m={x:Z(i.x),y:Z(i.y)},u=at([m.x,m.y],([v,P])=>v||P?1:"unset"),{axis:f,registerItem:N,updateOrder:w}=p;return e.jsx(s,{drag:f,...o,dragSnapToOrigin:!0,style:{...i,x:m.x,y:m.y,zIndex:u},layout:l,onDrag:(v,P)=>{const{velocity:k}=P;k[f]&&w(c,m[f].get(),k[f]),n&&n(v,P)},onLayoutMeasure:v=>N(c,v),ref:x,ignoreStrict:!0,children:t})}const dt=d.forwardRef(ot);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=X("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=X("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),q={twitter:{id:"twitter",name:"Twitter / X",maxLength:280,hashtagLimit:3,supportsImages:!0,supportsVideo:!0,supportsLinks:!0,optimalTimes:["9:00 AM","12:00 PM","5:00 PM"],audienceActive:"Weekdays, business hours"},linkedin:{id:"linkedin",name:"LinkedIn",maxLength:3e3,hashtagLimit:5,supportsImages:!0,supportsVideo:!0,supportsLinks:!0,optimalTimes:["7:00 AM","12:00 PM","5:00 PM"],audienceActive:"Weekdays, especially Tue-Thu"},instagram:{id:"instagram",name:"Instagram",maxLength:2200,hashtagLimit:30,supportsImages:!0,supportsVideo:!0,supportsLinks:!1,optimalTimes:["11:00 AM","2:00 PM","7:00 PM"],audienceActive:"Evenings and weekends"},tiktok:{id:"tiktok",name:"TikTok",maxLength:300,hashtagLimit:5,supportsImages:!1,supportsVideo:!0,supportsLinks:!1,optimalTimes:["7:00 PM","8:00 PM","9:00 PM"],audienceActive:"Evenings, especially weekends"},facebook:{id:"facebook",name:"Facebook",maxLength:63206,hashtagLimit:5,supportsImages:!0,supportsVideo:!0,supportsLinks:!0,optimalTimes:["9:00 AM","1:00 PM","7:00 PM"],audienceActive:"Midday and evenings, all week"}};function ht(t,i,c){const r=q[c],n=[],l=[];let o=!1,x=t;t.length>r.maxLength&&(x=t.slice(0,r.maxLength-3)+"...",o=!0,n.push(`Content truncated to ${r.maxLength} characters`));const s=i.slice(0,r.hashtagLimit);switch(i.length>r.hashtagLimit&&n.push(`Only ${r.hashtagLimit} hashtags will be included (${i.length} provided)`),c){case"twitter":t.length>200&&l.push("Consider using a thread for longer content"),!t.includes("?")&&!t.includes("!")&&l.push("Adding a question or call-to-action may boost engagement");break;case"linkedin":t.includes(`
`)||l.push("Use line breaks for better readability"),t.length<100&&l.push("Longer posts (500-1000 chars) perform better on LinkedIn");break;case"instagram":i.length<10&&l.push("Consider using more hashtags (10-20 recommended)"),!r.supportsLinks&&t.includes("http")&&(n.push("Links in captions are not clickable on Instagram"),l.push('Use "link in bio" instead of direct URLs'));break;case"tiktok":t.length>150&&l.push("Shorter captions work better on TikTok");break}return{platform:c,content:x,truncated:o,characterCount:x.length,maxCharacters:r.maxLength,hashtags:s,hashtagsIncluded:s.length,warnings:n,optimizations:l}}function ut(t,i){return Object.keys(q).map(c=>ht(t,i,c))}const re={twitter:"X",linkedin:"in",instagram:"IG",tiktok:"TT",facebook:"FB"},ie={twitter:"bg-gray-800 text-white",linkedin:"bg-blue-600 text-white",instagram:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",tiktok:"bg-black text-white",facebook:"bg-blue-500 text-white"},pt={draft:{label:"Draft",color:"bg-gray-500/20 text-gray-400"},scheduled:{label:"Scheduled",color:"bg-primary/20 text-primary"},published:{label:"Published",color:"bg-success/20 text-success"},failed:{label:"Failed",color:"bg-critical/20 text-critical"}};function gt({post:t,onEdit:i,onDelete:c,onSchedule:r,onPublish:n,onCrossPost:l,onDuplicate:o,isSelected:x,onSelect:s,showDragHandle:p}){const m=pt[t.status],u=ie[t.platform],f=re[t.platform];return e.jsxs(j.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`glass-panel rounded-xl p-5 border transition-all duration-300 ${x?"border-primary bg-primary/5":"border-glass-border hover:border-primary/30"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-500 hover:text-gray-300 -ml-1",children:e.jsx(xt,{size:16})}),s&&e.jsx("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-white transition-colors",children:x?e.jsx(H,{size:18,className:"text-primary"}):e.jsx(te,{size:18})}),e.jsx("span",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold ${u}`,children:f}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${m.color}`,children:m.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>i(t),className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition-colors",title:"Edit",children:e.jsx(mt,{size:16})}),e.jsx("button",{onClick:()=>o(t),className:"p-2 rounded-lg hover:bg-primary/10 text-gray-400 hover:text-primary transition-colors",title:"Duplicate",children:e.jsx(et,{size:16})}),e.jsx("button",{onClick:()=>c(t.id),className:"p-2 rounded-lg hover:bg-critical/10 text-gray-400 hover:text-critical transition-colors",title:"Delete",children:e.jsx(ee,{size:16})})]})]}),e.jsxs("div",{className:"mb-3",children:[t.imageUrl&&e.jsx("div",{className:"mb-3 rounded-lg overflow-hidden bg-white/5 aspect-video flex items-center justify-center",children:e.jsx("img",{src:t.imageUrl,alt:"Post preview",className:"w-full h-full object-cover",onError:N=>{N.currentTarget.style.display="none"}})}),e.jsx("p",{className:"text-sm text-gray-300 line-clamp-3",children:t.content||t.caption})]}),t.hashtags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[t.hashtags.slice(0,4).map((N,w)=>e.jsxs("span",{className:"text-xs text-primary bg-primary/10 px-2 py-0.5 rounded",children:["#",N]},w)),t.hashtags.length>4&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.hashtags.length-4," more"]})]}),t.scheduledAt&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[e.jsx(_,{size:12}),e.jsxs("span",{children:[new Date(t.scheduledAt).toLocaleDateString()," at"," ",new Date(t.scheduledAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-glass-border",children:[t.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>r(t),className:"flex-1",children:[e.jsx(E,{size:14,className:"mr-1"}),"Schedule"]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>l(t),title:"Preview on all platforms",children:e.jsx(R,{size:14})}),e.jsxs(b,{variant:"primary",size:"sm",onClick:()=>n(t),className:"flex-1",children:[e.jsx(B,{size:14,className:"mr-1"}),"Publish"]})]}),t.status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>l(t),title:"Preview on all platforms",children:e.jsx(R,{size:14})}),e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>n(t),className:"flex-1",children:[e.jsx(B,{size:14,className:"mr-1"}),"Publish Now"]})]})]})]})}function ft({post:t,onClose:i,onSave:c}){const[r,n]=d.useState(t.content||t.caption||""),[l,o]=d.useState(t.hashtags.join(", ")),x=()=>{c({content:r,caption:r,hashtags:l.split(",").map(s=>s.trim().replace(/^#/,"")).filter(Boolean)}),i()};return e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:i,children:e.jsxs(j.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-panel rounded-2xl p-6 w-full max-w-lg border border-glass-border",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Draft"}),e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white",children:e.jsx(T,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{value:r,onChange:s=>n(s.target.value),rows:6,className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hashtags"}),e.jsx("input",{type:"text",value:l,onChange:s=>o(s.target.value),placeholder:"tag1, tag2, tag3",className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:border-primary transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate hashtags with commas"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(b,{variant:"secondary",onClick:i,className:"flex-1",children:"Cancel"}),e.jsxs(b,{variant:"primary",onClick:x,className:"flex-1",children:[e.jsx(U,{size:16,className:"mr-1"}),"Save Changes"]})]})]})]})})}function bt({post:t,onClose:i,onSchedule:c}){const[r,n]=d.useState(""),[l,o]=d.useState(""),x=()=>{if(r&&l){const s=new Date(`${r}T${l}`);c(s),i()}};return d.useState(()=>{const s=new Date;s.setDate(s.getDate()+1),s.setHours(9,0,0,0),n(s.toISOString().split("T")[0]),o("09:00")}),e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:i,children:e.jsxs(j.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-panel rounded-2xl p-6 w-full max-w-md border border-glass-border",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Schedule Post"}),e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white",children:e.jsx(T,{size:20})})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 line-clamp-2",children:t.content||t.caption}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:r,onChange:s=>n(s.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:l,onChange:s=>o(s.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(b,{variant:"secondary",onClick:i,className:"flex-1",children:"Cancel"}),e.jsxs(b,{variant:"primary",onClick:x,className:"flex-1",disabled:!r||!l,children:[e.jsx(E,{size:16,className:"mr-1"}),"Schedule"]})]})]})]})})}function yt({post:t,onClose:i,onCopyToPlatform:c}){const r=ut(t.content||t.caption||"",t.hashtags),[n,l]=d.useState(new Set),o=s=>{s.platform!==t.platform&&(c(s.platform,s.content,s.hashtags),l(p=>new Set([...p,s.platform])))},x=()=>{r.forEach(s=>{s.platform!==t.platform&&(c(s.platform,s.content,s.hashtags),l(p=>new Set([...p,s.platform])))})};return e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:i,children:e.jsxs(j.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-panel rounded-2xl p-6 w-full max-w-3xl border border-glass-border max-h-[80vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Copy to Other Platforms"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Preview and copy optimized content to other platforms"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{variant:"secondary",size:"sm",onClick:x,className:"gap-1",children:[e.jsx(R,{size:14}),"Copy to All"]}),e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white",children:e.jsx(T,{size:20})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>{const p=s.platform===t.platform,m=n.has(s.platform);return e.jsxs("div",{className:`p-4 rounded-xl border ${p?"border-primary/50 bg-primary/5":m?"border-success/50 bg-success/5":"border-glass-border bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold ${ie[s.platform]}`,children:re[s.platform]}),e.jsx("span",{className:"font-medium text-white",children:q[s.platform].name})]}),p?e.jsx("span",{className:"text-xs text-primary bg-primary/10 px-2 py-0.5 rounded",children:"Original"}):m?e.jsxs("span",{className:"text-xs text-success bg-success/10 px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(U,{size:10}),"Copied"]}):e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>o(s),className:"text-xs h-6 px-2",children:"Copy"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.characterCount," / ",s.maxCharacters," characters"]}),s.truncated&&e.jsx("span",{className:"text-xs text-warning",children:"Truncated"})]}),e.jsx("div",{className:"w-full h-1 bg-white/10 rounded-full mb-3",children:e.jsx("div",{className:`h-full rounded-full transition-all ${s.characterCount/s.maxCharacters>.9?"bg-warning":"bg-primary"}`,style:{width:`${Math.min(100,s.characterCount/s.maxCharacters*100)}%`}})}),e.jsx("p",{className:"text-sm text-gray-300 line-clamp-3 mb-3",children:s.content}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.hashtags.map((u,f)=>e.jsxs("span",{className:"text-xs text-primary bg-primary/10 px-1.5 py-0.5 rounded",children:["#",u]},f)),s.hashtags.length<t.hashtags.length&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.hashtags.length-s.hashtags.length," hidden"]})]}),s.warnings.length>0&&e.jsx("div",{className:"space-y-1 mb-2",children:s.warnings.map((u,f)=>e.jsxs("div",{className:"flex items-start gap-1.5 text-xs text-warning",children:[e.jsx(Xe,{size:12,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]},f))}),s.optimizations.length>0&&e.jsx("div",{className:"space-y-1",children:s.optimizations.map((u,f)=>e.jsxs("div",{className:"flex items-start gap-1.5 text-xs text-accent-purple",children:[e.jsx(Ke,{size:12,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]},f))})]},s.platform)})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-glass-border flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:n.size>0?`${n.size} platform${n.size!==1?"s":""} copied to drafts`:'Click "Copy" to create drafts for other platforms'}),e.jsx(b,{variant:"secondary",onClick:i,children:"Done"})]})]})})}function jt({selectedCount:t,onScheduleAll:i,onPublishAll:c,onDeleteAll:r,onApplyTemplate:n,onClearSelection:l,hasTemplates:o}){const[x,s]=d.useState(!1);return t===0?null:e.jsxs("div",{className:"relative",children:[e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>s(!x),className:"flex items-center gap-2",children:[e.jsx(H,{size:16}),e.jsxs("span",{children:[t," selected"]}),e.jsx(_e,{size:14})]}),e.jsx(z,{children:x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsx(j.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 w-48 bg-surface border border-glass-border rounded-xl shadow-xl z-50 overflow-hidden",children:e.jsxs("div",{className:"p-2",children:[o&&e.jsxs("button",{onClick:()=>{n(),s(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(V,{size:16,className:"text-accent-purple"}),"Apply Template"]}),e.jsxs("button",{onClick:()=>{i(),s(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(E,{size:16,className:"text-primary"}),"Schedule All"]}),e.jsxs("button",{onClick:()=>{c(),s(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(B,{size:16,className:"text-success"}),"Publish All"]}),e.jsx("div",{className:"border-t border-glass-border my-1"}),e.jsxs("button",{onClick:()=>{r(),s(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-critical hover:bg-critical/10 rounded-lg transition-colors",children:[e.jsx(ee,{size:16}),"Delete All"]}),e.jsx("div",{className:"border-t border-glass-border my-1"}),e.jsxs("button",{onClick:()=>{l(),s(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(T,{size:16}),"Clear Selection"]})]})})]})})]})}function Nt({posts:t,onNotify:i}){const[c,r]=d.useState(!1),n=()=>{Qe(t),i("Exported posts to CSV"),r(!1)},l=()=>{Je({posts:t,activities:[]}),i("Exported posts to JSON"),r(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs(b,{variant:"ghost",size:"sm",onClick:()=>r(!c),className:"flex items-center gap-2",children:[e.jsx(Re,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsx(z,{children:c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),e.jsx(j.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 w-48 bg-surface border border-glass-border rounded-xl shadow-xl z-50 overflow-hidden",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(qe,{size:16,className:"text-success"}),"Export as CSV"]}),e.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx(Ge,{size:16,className:"text-info"}),"Export as JSON"]})]})})]})})]})}function vt({templates:t,selectedCount:i,onClose:c,onApply:r}){const[n,l]=d.useState(null),[o,x]=d.useState(""),s=d.useMemo(()=>{if(!o.trim())return t;const m=o.toLowerCase();return t.filter(u=>u.name.toLowerCase().includes(m)||u.category.toLowerCase().includes(m))},[t,o]),p=()=>{n&&r(n)};return e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:e.jsxs(j.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-panel rounded-2xl p-6 w-full max-w-lg border border-glass-border max-h-[80vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(V,{size:20,className:"text-accent-purple"}),"Apply Template to ",i," Posts"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selected content will be replaced with template content"})]}),e.jsx("button",{onClick:c,className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white",children:e.jsx(T,{size:20})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(K,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:o,onChange:m=>x(m.target.value),placeholder:"Search templates...",className:"w-full bg-white/5 border border-glass-border rounded-xl py-2.5 pl-10 pr-4 text-white placeholder-gray-500 focus:border-primary transition-colors text-sm"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-0",children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(V,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No templates found"})]}):s.map(m=>e.jsxs("button",{onClick:()=>l(m),className:`w-full p-4 rounded-xl border text-left transition-all ${(n==null?void 0:n.id)===m.id?"border-primary bg-primary/10":"border-glass-border hover:border-primary/30 bg-white/5 hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:m.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[10px] text-gray-500 bg-white/5 px-1.5 py-0.5 rounded capitalize",children:m.category}),e.jsx("span",{className:"text-[10px] text-gray-500 bg-white/5 px-1.5 py-0.5 rounded capitalize",children:m.platform})]})]}),(n==null?void 0:n.id)===m.id&&e.jsx(U,{size:16,className:"text-primary"})]}),e.jsx("p",{className:"text-xs text-gray-400 line-clamp-2",children:m.content}),m.hashtags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[m.hashtags.slice(0,3).map(u=>e.jsxs("span",{className:"text-[10px] text-primary",children:["#",u]},u)),m.hashtags.length>3&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",m.hashtags.length-3]})]})]},m.id))}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-glass-border",children:[e.jsx(b,{variant:"secondary",onClick:c,className:"flex-1",children:"Cancel"}),e.jsxs(b,{variant:"primary",onClick:p,className:"flex-1",disabled:!n,children:[e.jsx(He,{size:16,className:"mr-1"}),"Apply to ",i," Posts"]})]})]})})}function Mt(){const{posts:t,setPosts:i,addPost:c,updatePost:r,deletePost:n,addNotification:l,addActivity:o,templates:x,incrementTemplateUsage:s}=Be(),[p,m]=d.useState(""),[u,f]=d.useState("all"),[N,w]=d.useState("all"),[v,P]=d.useState(null),[k,G]=d.useState(null),[A,Q]=d.useState(null),[y,S]=d.useState(new Set),[ne,L]=d.useState(!1),[ce,O]=d.useState(!1),C=t.filter(a=>{const h=(a.content||a.caption||"").toLowerCase().includes(p.toLowerCase()),g=u==="all"||a.status===u,D=N==="all"||a.platform===N;return h&&g&&D}),oe=d.useCallback(a=>{S(h=>{const g=new Set(h);return g.has(a)?g.delete(a):g.add(a),g})},[]),de=d.useCallback(()=>{y.size===C.length?S(new Set):S(new Set(C.map(a=>a.id)))},[C,y.size]),xe=d.useCallback(()=>{S(new Set)},[]),me=d.useCallback(a=>{const h=new Set(a.map(D=>D.id)),g=t.filter(D=>!h.has(D.id));i([...a,...g])},[t,i]),he=d.useCallback(a=>{c({id:crypto.randomUUID(),content:a.content,caption:a.caption,hashtags:[...a.hashtags],platform:a.platform,status:"draft",imageUrl:a.imageUrl}),l({type:"success",title:"Post Duplicated",message:"Created a copy in drafts"})},[c,l]),ue=d.useCallback(()=>{L(!0)},[]),pe=d.useCallback(a=>{const h=t.filter(g=>y.has(g.id));h.forEach(g=>{r(g.id,{status:"scheduled",scheduledAt:a,scheduledFor:a.toISOString()})}),l({type:"success",title:"Posts Scheduled",message:`${h.length} posts scheduled for ${a.toLocaleDateString()}`}),o({id:crypto.randomUUID(),action:"Bulk Schedule",description:`Scheduled ${h.length} posts`,timestamp:new Date().toISOString(),status:"success"}),S(new Set),L(!1)},[t,y,r,l,o]),ge=d.useCallback(()=>{const a=t.filter(h=>y.has(h.id));a.forEach(h=>{r(h.id,{status:"published",publishedAt:new Date})}),l({type:"success",title:"Posts Published",message:`${a.length} posts published successfully`}),o({id:crypto.randomUUID(),action:"Bulk Publish",description:`Published ${a.length} posts`,timestamp:new Date().toISOString(),status:"success"}),S(new Set)},[t,y,r,l,o]),fe=d.useCallback(()=>{const a=y.size;y.forEach(h=>{n(h)}),l({type:"info",title:"Posts Deleted",message:`${a} posts removed from queue`}),S(new Set)},[y,n,l]),be=d.useCallback(a=>{const h=t.filter(g=>y.has(g.id));h.forEach(g=>{r(g.id,{content:a.content,caption:a.content,hashtags:[...a.hashtags]})}),s(a.id),l({type:"success",title:"Template Applied",message:`Applied "${a.name}" to ${h.length} posts`}),o({id:crypto.randomUUID(),action:"Bulk Template Apply",description:`Applied "${a.name}" to ${h.length} posts`,timestamp:new Date().toISOString(),status:"success"}),S(new Set),O(!1)},[t,y,r,s,l,o]),ye=t.filter(a=>a.status==="draft").length,je=t.filter(a=>a.status==="scheduled").length,Ne=t.filter(a=>a.status==="published").length,ve=a=>{P(a)},we=a=>{v&&(r(v.id,a),l({type:"success",title:"Draft Updated",message:"Your changes have been saved"}))},ke=a=>{n(a),l({type:"info",title:"Post Deleted",message:"The post has been removed from your drafts"})},Ce=a=>{G(a)},Se=a=>{Q(a)},ze=d.useCallback((a,h,g)=>{c({id:crypto.randomUUID(),content:h,caption:h,hashtags:g,platform:a,status:"draft",imageUrl:A==null?void 0:A.imageUrl}),l({type:"success",title:"Draft Created",message:`Content copied to ${a} drafts`})},[c,l,A]),Pe=a=>{k&&(r(k.id,{status:"scheduled",scheduledAt:a}),l({type:"success",title:"Post Scheduled",message:`Scheduled for ${a.toLocaleDateString()} at ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}),o({id:crypto.randomUUID(),action:"Post Scheduled",description:`Scheduled post for ${k.platform}`,timestamp:new Date().toISOString(),status:"success",platform:k.platform}))},[,J]=d.useState(!1),De=async a=>{var h;if(a.platform==="twitter"){if(!We()){l({type:"error",title:"Not Connected",message:"Please connect your X account in Automation Hub first"});return}J(!0);const g=a.content||a.caption||"",D=a.hashtags.length>0?`

`+a.hashtags.map(Te=>`#${Te}`).join(" "):"",Ae=(g+D).slice(0,280),M=await Ye(Ae);J(!1),M.success?(r(a.id,{status:"published",publishedAt:new Date}),l({type:"success",title:"Posted to X",message:"Tweet published successfully!"}),o({id:crypto.randomUUID(),action:"Post Published",description:`Published tweet to X (@${((h=M.tweet)==null?void 0:h.id)||"unknown"})`,timestamp:new Date().toISOString(),status:"success",platform:a.platform})):(r(a.id,{status:"failed"}),l({type:"error",title:"Publishing Failed",message:M.error||"Failed to post to X"}),o({id:crypto.randomUUID(),action:"Post Failed",description:`Failed to publish to X: ${M.error}`,timestamp:new Date().toISOString(),status:"failed",platform:a.platform}));return}r(a.id,{status:"published",publishedAt:new Date}),l({type:"success",title:"Post Published",message:`Successfully published to ${a.platform}`}),o({id:crypto.randomUUID(),action:"Post Published",description:`Published post to ${a.platform}`,timestamp:new Date().toISOString(),status:"success",platform:a.platform})};return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Content Queue"}),e.jsx("p",{className:"text-gray-400",children:"Manage your drafts and scheduled posts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nt,{posts:C,onNotify:a=>l({type:"success",title:"Export Complete",message:a})}),e.jsx(jt,{selectedCount:y.size,onScheduleAll:ue,onPublishAll:ge,onDeleteAll:fe,onApplyTemplate:()=>O(!0),onClearSelection:xe,hasTemplates:x.length>0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(I,{className:"p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(W,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:ye})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Drafts"})]}),e.jsxs(I,{className:"p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(_,{size:16,className:"text-primary"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:je})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Scheduled"})]}),e.jsxs(I,{className:"p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(U,{size:16,className:"text-success"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:Ne})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Published"})]})]}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[C.length>0&&e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:[y.size===C.length?e.jsx(H,{size:18,className:"text-primary"}):e.jsx(te,{size:18}),e.jsx("span",{className:"text-sm",children:"Select All"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search posts...",value:p,onChange:a=>m(a.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-2.5 pl-10 pr-4 text-white placeholder-gray-500 focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{size:16,className:"text-gray-500"}),e.jsxs("select",{value:u,onChange:a=>f(a.target.value),className:"bg-white/5 border border-glass-border rounded-xl py-2.5 px-4 text-white focus:border-primary transition-colors",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("select",{value:N,onChange:a=>w(a.target.value),className:"bg-white/5 border border-glass-border rounded-xl py-2.5 px-4 text-white focus:border-primary transition-colors",children:[e.jsx("option",{value:"all",children:"All Platforms"}),e.jsx("option",{value:"twitter",children:"Twitter / X"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"tiktok",children:"TikTok"})]})]})}),C.length>0?e.jsx(it,{axis:"y",values:C,onReorder:me,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(z,{mode:"popLayout",children:C.map(a=>e.jsx(dt,{value:a,dragListener:!1,children:e.jsx(gt,{post:a,onEdit:ve,onDelete:ke,onSchedule:Ce,onPublish:De,onCrossPost:Se,onDuplicate:he,isSelected:y.has(a.id),onSelect:oe,showDragHandle:!0})},a.id))})}):e.jsxs(I,{className:"p-12 text-center",children:[e.jsx(W,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 mb-2",children:"No posts found"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.length===0?"Create content in Content Lab to see it here":"Try adjusting your filters"})]}),e.jsx(z,{children:v&&e.jsx(ft,{post:v,onClose:()=>P(null),onSave:we})}),e.jsx(z,{children:k&&e.jsx(bt,{post:k,onClose:()=>G(null),onSchedule:Pe})}),e.jsx(z,{children:A&&e.jsx(yt,{post:A,onClose:()=>Q(null),onCopyToPlatform:ze})}),e.jsx(z,{children:ce&&e.jsx(vt,{templates:x,selectedCount:y.size,onClose:()=>O(!1),onApply:be})}),e.jsx(z,{children:ne&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>L(!1),children:e.jsxs(j.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-panel rounded-2xl p-6 w-full max-w-md border border-glass-border",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Schedule ",y.size," Posts"]}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white",children:e.jsx(T,{size:20})})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"All selected posts will be scheduled for the same date and time."}),e.jsx(wt,{onSchedule:pe,onCancel:()=>L(!1)})]})})})]})}function wt({onSchedule:t,onCancel:i}){const[c,r]=d.useState(""),[n,l]=d.useState("");d.useState(()=>{const x=new Date;x.setDate(x.getDate()+1),x.setHours(9,0,0,0),r(x.toISOString().split("T")[0]),l("09:00")});const o=()=>{if(c&&n){const x=new Date(`${c}T${n}`);t(x)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:c,onChange:x=>r(x.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:n,onChange:x=>l(x.target.value),className:"w-full bg-white/5 border border-glass-border rounded-xl py-3 px-4 text-white focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(b,{variant:"secondary",onClick:i,className:"flex-1",children:"Cancel"}),e.jsxs(b,{variant:"primary",onClick:o,className:"flex-1",disabled:!c||!n,children:[e.jsx(E,{size:16,className:"mr-1"}),"Schedule All"]})]})]})}export{Mt as DraftsQueue};
